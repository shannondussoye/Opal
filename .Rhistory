data <- read.csv("/home/shannon/Github/Opal/d3-data.csv")
installed.packages("rjson")
install.packages("rjson")
x <- toJSON(unname(split(data, 1:nrow(data))))
library(rjson)
x <- toJSON(unname(split(data, 1:nrow(data))))
install.packages("RJSONIO")
getwd()
write(x,d3-data.json)
write(x,"d3-data.json")
View(data)
data <- read.csv("/home/shannon/Github/Opal/d3-data.csv",row.names = F)
library(dplyr)
View(data)
data <- select(-X)
data <- select(-x)
View(data)
colnames(data)
data <- select(data,-x)
data <- select(data,-X)
data <- toJSON(unname(split(data, 1:nrow(data))))
write(data,"d3-data.json")
data <- read.csv(file = "d3-data.csv")
View(data)
data <- read.csv(file = "d3-data.csv") %>% select(lat,lon)
View(data)
data <- toJSON(unname(split(data, 1:nrow(data))))
rm(x)
data <- read.csv(file = "d3-data.csv") %>% select(lat,lon)
View(data)
write(data,"d3-data.json")
data <- read.csv(file = "d3-data.csv") %>% select(lat,lon)
data <- toJSON(unname(split(data, 1:nrow(data))))
write(data,"d3-data.json")
data <- read.csv(file = "d3-data.csv") %>% select(lat,lon)
write.csv(x = data,"testdata.csv")
opal_data <- read.csv("Full Data.csv")
View(opal_data)
library(dplyr)
opal_data <- read.csv("Full Data.csv")
opal_data <- read.csv("Full Data.csv") %>% select(-X)
View(opal_data)
View(opal_data)
opal_data <- read.csv("Full Data.csv") %>% select(-X,mode)
View(opal_data)
train_tap_on <- opal_data %>% filter(tap=="on")
train_tap_off <- opal_data %>% filter(tap=="off")
rm(opal_data)
library(dplyr)
opal_data <- read.csv("Full Data.csv") %>% select(-X,mode)
train_tap_on <- opal_data %>% filter(tap=="on")
rm(opal_data)
View(train_tap_on)
View(train_tap_on)
opal_data <- read.csv("Full Data.csv") %>% select(-X,-mode)
train_tap_on <- opal_data %>% filter(tap=="on")
rm(opal_data)
View(train_tap_on)
View(train_tap_on)
test <- opal_data
test <- train_tap_on
test$dt <- parse(test$date,test$time)
rm(test)
train_tap_on <- mutate(train_tap_on,datetime=paste(date,time,sep=" "))
View(train_tap_on)
head(train_tap_on)
train_tap_on$datetime <- as.Date(train_tap_on$datetime,format='%Y/%m%d h:m')
head(train_tap_on)
train_tap_on$datetime <- as.Date(train_tap_on$datetime,format='%Y/%m%d %H:%M')
head(train_tap_on)
train_tap_on$datetime <- as.Date(train_tap_on$datetime,format='%Y%m%d %H:%M')
head(train_tap_on)
train_tap_on$datetime <- as.Date(train_tap_on$datetime,format='%Y%m%d %h:%m')
head(train_tap_on)
opal_data <- read.csv("Full Data.csv") %>% select(-X,-mode)
train_tap_on <- opal_data %>% filter(tap=="on")
rm(opal_data)
train_tap_on <- mutate(train_tap_on,datetime=paste(date,time,sep=" "))
train_tap_on2 <- train_tap_on
train_tap_on$datetime <- as.Date(train_tap_on$datetime,format='%Y%m%d %H:%M')
head(train_tap_on)
opal_data <- read.csv("Full Data.csv") %>% select(-X,-mode)
train_tap_on <- opal_data %>% filter(tap=="on")
rm(opal_data)
train_tap_on <- mutate(train_tap_on,datetime=paste(date,time,sep=" "))
train_tap_on$datetime <- strptime(train_tap_on$datetime, "%Y%m%d %H:%M")
head(train_tap_on)
str(train_tap_on)
rm(train_tap_on2)
stations <- train_tap_on %>%
select(loc,lat,lon) %>%
unique()
View(stations)
timestamp <- train_tap_on %>%
select(timestamp) %>% unique()
View(train_tap_on)
timestamp <- train_tap_on %>%
select(datetime) %>% unique()
View(timestamp)
timestamp <- train_tap_on %>%
select(datetime) %>% unique() %>% sort()
timestamp <- train_tap_on %>%
select(datetime) %>% unique() %>% sort(decreasing = F)
View(timestamp)
timestamp <- train_tap_on %>%
select(datetime) %>% unique() %>% sort(datetime)
timestamp <- train_tap_on %>%
select(datetime) %>% unique()
timestamp <- sort(timestamp$datetime)
timestamp <- sort(timestamp$datetime) %>% as.data.frame()
timestamp <- sort(timestamp$datetime)
timestamp <- train_tap_on %>%
select(datetime) %>% unique()
timestamp <- sort(timestamp$datetime)
class(timestamp)
timestamp <- data.frame(sort(timestamp$datetime) )
timestamp <- data.frame(sort(timestamp$datetime),value=NA)
timestamp <- train_tap_on %>%
select(datetime) %>% unique()
timestamp <- sort(timestamp$datetime)
str(timestamp)
opal_data <- read.csv("Full Data.csv") %>% select(-X,-mode)
train_tap_on <- opal_data %>% filter(tap=="on")
library(dplyr)
opal_data <- read.csv("Full Data.csv") %>% select(-X,-mode)
train_tap_on <- opal_data %>% filter(tap=="on")
rm(opal_data)
train_tap_on <- mutate(train_tap_on,datetime=paste(date,time,sep=" "))
stations <- train_tap_on %>%
select(loc,lat,lon) %>%
unique()
timestamp <- train_tap_on %>%
select(datetime) %>% unique()
View(timestamp)
View(timestamp)
timestamp$datetime <- strptime(timestamp$datetime, "%Y%m%d %H:%M")
View(timestamp)
timestamp <- sort(timestamp$datetime)
timestamp <- train_tap_on %>%
select(datetime) %>% unique()
timestamp$datetime <- strptime(timestamp$datetime, "%Y%m%d %H:%M")
timestamp$datetime <- order(timestamp$datetime)
View(timestamp)
timestamp <- train_tap_on %>%
select(datetime) %>% unique()
View(timestamp)
timestamp$datetime <- strptime(timestamp$datetime, "%Y%m%d %H:%M")
View(timestamp)
timestamp <- order(timestamp$datetime)
timestamp <- train_tap_on %>%
select(datetime) %>% unique()
timestamp$datetime <- strptime(timestamp$datetime, "%Y%m%d %H:%M")
timestamp[order(as.Date(timestamp$datetime,format="%Y%m%d %H:%M")),,drop=FALSE]
timestamp[order(strptime(timestamp$datetime,format="%Y%m%d %H:%M")),,drop=FALSE]
library(lubridate)
install.packages("lubridate")
library(lubridate)
timestamp <- train_tap_on %>%
select(datetime) %>% unique()
timestamp$datetime <- strptime(timestamp$datetime, "%Y%m%d %H:%M")
head(timestamp)
arrange(timestamp,asc(datetime))
timestamp <- train_tap_on %>%
select(datetime) %>% unique()
timestamp$datetime <- as.POSIXct(strptime(timestamp$datetime, "%Y%m%d %H:%M"))
arrange(timestamp,asc(datetime))
arrange(timestamp,desc(datetime))
arrange(timestamp,-desc(datetime))
timestamp$datetime <- arrange(timestamp,-desc(datetime))
View(timestamp)
timestamp$datetime <- arrange(timestamp,-desc(datetime)) %>% select(!is.na(datetime))
timestamp$datetime <- !is.na(timestamp$datetime)
View(timestamp)
timestamp <- filter(timestamp,!is.na(datetime))
class(timestamp)
timestamp <- filter(timestamp,!is.na(datetime))
timestamp <- train_tap_on %>%
select(datetime) %>% unique() %>% filter(!is.na())
timestamp <- timestamp %>% filter(!is.na(datetime))
opal_data <- read.csv("Full Data.csv") %>% select(-X,-mode)
train_tap_on <- opal_data %>% filter(tap=="on")
rm(opal_data)
train_tap_on <- mutate(train_tap_on,datetime=paste(date,time,sep=" "))
View(train_tap_on)
opal_data <- read.csv("Full Data.csv") %>% select(-X,-mode)
train_tap_on <- opal_data %>% filter(tap=="on")
rm(opal_data)
View(train_tap_on)
train_tap_on <- mutate(train_tap_on,datetime=paste(date,time,sep=" "))
View(train_tap_on)
stations <- train_tap_on %>%
select(loc,lat,lon) %>%
unique()
View(stations)
timestamp <- train_tap_on %>%
select(datetime) %>% unique()
View(timestamp)
timestamp$datetime <- as.POSIXct(strptime(timestamp$datetime, "%Y%m%d %H:%M"))
View(timestamp)
timestamp$datetime <- arrange(timestamp,-desc(datetime))
View(timestamp)
timestamp <- train_tap_on %>%
select(datetime) %>% unique()
timestamp$datetime2 <- as.POSIXct(strptime(timestamp$datetime, "%Y%m%d %H:%M"))
View(timestamp)
timestamp$datetime <- arrange(timestamp,-desc(datetime))
View(timestamp)
View(timestamp)
timestamp <- train_tap_on %>%
select(datetime) %>% unique()
timestamp$datetime <- as.POSIXct(strptime(timestamp$datetime, "%Y%m%d %H:%M"))
View(timestamp)
timestamp$datetime <- arrange(timestamp,-desc(datetime))
View(timestamp)
timestamp <- filter(timestamp,!is.na(datetime))
timestamp <- list(filter(timestamp,!is.na(datetime)))
timestamp <- as.vector(filter(timestamp,!is.na(datetime)))
timestamp <- train_tap_on %>%
select(datetime) %>% unique()
timestamp$datetime <- as.POSIXct(strptime(timestamp$datetime, "%Y%m%d %H:%M"))
View(timestamp)
timestamp <- train_tap_on %>%
select(datetime) %>% unique()
View(timestamp)
timestamp[,1548]
timestamp[1548,]
View(train_tap_on)
train_tap_on[1548,]
View(timestamp)
View(stations)
View(train_tap_on)
opal_data <- read.csv("Full Data.csv") %>% select(-X,-mode) %>% filter(loc!="UNKNOWN")
train_tap_on <- opal_data %>% filter(tap=="on")
rm(opal_data)
train_tap_on <- mutate(train_tap_on,datetime=paste(date,time,sep=" "))
stations <- train_tap_on %>%
select(loc,lat,lon) %>%
unique()
View(stations)
timestamp <- train_tap_on %>%
select(datetime) %>% unique()
View(timestamp)
timestamp$datetime <- as.POSIXct(strptime(timestamp$datetime, "%Y%m%d %H:%M"))
timestamp$datetime <- arrange(timestamp,-desc(datetime))
View(timestamp)
View(timestamp)
stations$j <- 1
View(stations)
timestamp$j <- 1
stations %>% inner_join(timestamp,by='j') %>% select(-j)
library(dplyr)
stations %>% inner_join(timestamp,by='j') %>% select(-j)
data <- stations %>% inner_join(timestamp,by='j') %>% select(-j)
View(data)
View(timestamp)
View(data)
str(data)
data <- stations %>% inner_join(timestamp,by='j') %>% select(-j) %>% as.data.frame()
str(data)
library(dplyr)
library(lubridate)
opal_data <- read.csv("Full Data.csv") %>% select(-X,-mode) %>% filter(loc!="UNKNOWN")
train_tap_on <- opal_data %>% filter(tap=="on")
rm(opal_data)
train_tap_on <- mutate(train_tap_on,datetime=paste(date,time,sep=" "))
stations <- train_tap_on %>%
select(loc,lat,lon) %>%
unique()
timestamp <- train_tap_on %>%
select(datetime) %>% unique()
stations$j <- 1
timestamp$j <- 1
View(stations)
View(timestamp)
inner_join(station,timestamp,by='j')
inner_join(stations,timestamp,by='j')
data <- inner_join(stations,timestamp,by='j')
str(data)
data <- inner_join(stations,timestamp,by='j') %>% select(-j)
str(data)
View(data)
View(data)
data <- arrange(data,-desc(datetime))
View(data)
data <- arrange(data,-desc(datetime,loc))
data <- arrange(data,datetime,loc)
View(data)
write.csv(data,"/home/shannon/Github/Opal/D3-data.csv",row.names = F)
rm(stations)
rm(timestamp)
View(train_tap_on)
x <- left_join(data,train_tap_on,by=c("datetime","loc"))
library(dplyr)
x <- left_join(data,train_tap_on,by=c("datetime","loc"))
View(x)
View(train_tap_on)
View(data)
train_tap_on %>% select(-date,-tap,-time,-lat,-lon)
train_tap_on <- train_tap_on %>% select(-date,-tap,-time,-lat,-lon)
x <- left_join(data,train_tap_on,by=c("datetime","loc"))
View(x)
data <- left_join(data,train_tap_on,by=c("datetime","loc"))
write.csv(data,"/home/shannon/Github/Opal/D3-data.csv",row.names = F)
View(data)
data[is.na(data)] <- 0
View(data)
write.csv(data,"/home/shannon/Github/Opal/D3-data.csv",row.names = F)
library(dplyr)
library(lubridate)
opal_data <- read.csv("Full Data.csv") %>% select(-X,-mode) %>% filter(loc!="UNKNOWN")
train_tap_on <- opal_data %>% filter(tap=="on")
rm(opal_data)
train_tap_on <- mutate(train_tap_on,datetime=paste(date,time,sep=" "))
stations <- train_tap_on %>%
select(loc,lat,lon) %>%
unique()
timestamp <- train_tap_on %>%
select(datetime) %>% unique()
stations$j <- 1
timestamp$j <- 1
data <- inner_join(stations,timestamp,by='j') %>% select(-j)
data <- arrange(data,datetime,loc)
rm(stations)
rm(timestamp)
train_tap_on <- train_tap_on %>% select(-tap,-lat,-lon)
data <- left_join(data,train_tap_on,by=c("datetime","loc"))
data[is.na(data)] <- 0
View(data)
data <- left_join(data,train_tap_on,by=c("datetime","loc"))
View(data)
rm(data)
data <- left_join(data,train_tap_on,by=c("datetime","loc"))
data <- inner_join(stations,timestamp,by='j') %>% select(-j)
library(dplyr)
library(lubridate)
library(dplyr)
library(lubridate)
opal_data <- read.csv("Full Data.csv") %>% select(-X,-mode) %>% filter(loc!="UNKNOWN")
train_tap_on <- opal_data %>% filter(tap=="on")
rm(opal_data)
train_tap_on <- mutate(train_tap_on,datetime=paste(date,time,sep=" "))
stations <- train_tap_on %>%
select(loc,lat,lon) %>%
unique()
timestamp <- train_tap_on %>%
select(datetime) %>% unique()
stations$j <- 1
timestamp$j <- 1
data <- inner_join(stations,timestamp,by='j') %>% select(-j)
data <- arrange(data,datetime,loc)
rm(stations)
rm(timestamp)
train_tap_on <- train_tap_on %>% select(-tap,-lat,-lon)
data2 <- left_join(data,train_tap_on,by=c("datetime","loc"))
View(data2)
View(data)
View(train_tap_on)
library(dplyr)
library(lubridate)
opal_data <- read.csv("Full Data.csv") %>% select(-X,-mode) %>% filter(loc!="UNKNOWN")
train_tap_on <- opal_data %>% filter(tap=="on")
rm(opal_data)
train_tap_on <- mutate(train_tap_on,datetime=paste(date,time,sep=" "))
stations <- train_tap_on %>%
select(loc,lat,lon) %>%
unique()
timestamp <- train_tap_on %>%
select(datetime) %>% unique()
stations$j <- 1
timestamp$j <- 1
data <- inner_join(stations,timestamp,by='j') %>% select(-j)
data <- arrange(data,datetime,loc)
rm(stations)
rm(timestamp)
View(data)
train_tap_on <- train_tap_on %>% select(-tap,-lat,-lon)
data2 <- left_join(data,train_tap_on,by=c("datetime","loc"))
View(data2)
timestamp <- train_tap_on %>%
select(datetime,date,time) %>% unique()
library(dplyr)
library(lubridate)
opal_data <- read.csv("Full Data.csv") %>% select(-X,-mode) %>% filter(loc!="UNKNOWN")
train_tap_on <- opal_data %>% filter(tap=="on")
rm(opal_data)
train_tap_on <- mutate(train_tap_on,datetime=paste(date,time,sep=" "))
stations <- train_tap_on %>%
select(loc,lat,lon) %>%
unique()
timestamp <- train_tap_on %>%
select(datetime,date,time) %>% unique()
View(timestamp)
stations$j <- 1
timestamp$j <- 1
data <- inner_join(stations,timestamp,by='j') %>% select(-j)
data <- arrange(data,datetime,loc)
View(data)
rm(stations)
rm(timestamp)
train_tap_on <- train_tap_on %>% select(-tap,-lat,-lon,-date,-time)
View(train_tap_on)
data2 <- left_join(data,train_tap_on,by=c("datetime","loc"))
View(data2)
data <- left_join(data,train_tap_on,by=c("datetime","loc"))
rm(data2)
write.csv(data,"/home/shannon/Github/Opal/D3-data.csv",row.names = F)
View(data)
data["count"][is.na(x["count"])] <- 0
data["count"][is.na(data["count"])] <- 0
View(data)
write.csv(data,"/home/shannon/Github/Opal/D3-data.csv",row.names = F)
